#include <stdint.h>
#include <stdbool.h>

#define EP0_IN 0x80

/* bmRequestType */
#define USB_REQ_DIRECTION_MASK 0x80
#define USB_REQ_DEVICE2HOST 0x80
#define USB_REQ_HOST2DEVICE 0x00

#define USB_REQ_RECIPIENT_MASK 0x1f
#define USB_REQ_RECIPIENT_DEVICE 0x00
#define USB_REQ_RECIPIENT_INTERFACE 0x01 // These requests are sent to DFU
#define USB_REQ_RECIPIENT_ENDPOINT 0x02

#define STANDARD_USB_REQ 0x00
#define CLASS_USB_REQ 0x20

/* bRequest */
enum // For standard requests
{
    USB_REQ_GET_STATUS = 0,
    USB_REQ_CLEAR_FEATURE,
    USB_REQ_SET_FEATURE = 3,
    USB_REQ_SET_ADDRESS = 5,
    USB_REQ_GET_DESCRIPTOR,
    USB_REQ_SET_DESCRIPTOR,
    USB_REQ_GET_CONFIGURATION,
    USB_REQ_SET_CONFIGURATION,
    USB_REQ_GET_INTERFACE,
    USB_REQ_SET_INTERFACE
};

enum // Used in the requests sent to DFU
{
    DFU_DETACH = 0,
    DFU_DOWNLOAD,
    DFU_UPLOAD,
    DFU_GET_STATUS,
    DFU_CLEAR_STATUS,
    DFU_GET_STATE,
    DFU_ABORT
};

/* wValue */
#define USB_DT_STRING 3

#define USB_FEATURE_ENDPOINT_HALT 0x00
